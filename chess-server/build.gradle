/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'com.pmarshall.java-conventions'
}

task prepareDockerJars {
    dependsOn("copyMainJar", "copyModularJars", "copyNonModularJars")
}

task copyMainJar(type: Copy) {
    from(tasks.jar)
    into("$buildDir")
}

task copyModularJars(type: Copy) {
    from(configurations.runtimeClasspath)
    into("$buildDir/mods")

    exclude('log4j-*.jar')
}

task copyNonModularJars(type: Copy) {
    from(configurations.runtimeClasspath)
    into("$buildDir/jars")

    include('log4j-*.jar')
}

build.finalizedBy(tasks.prepareDockerJars)

dependencies {
    api project(':chess-model')
    api project(':chess-engine')
    api project(':chess-web-api')
    api 'org.slf4j:slf4j-api:2.0.6'
    api 'org.apache.logging.log4j:log4j-api:2.19.0'
    api 'org.apache.logging.log4j:log4j-core:2.19.0'
    api 'org.apache.logging.log4j:log4j-slf4j2-impl:2.19.0'
}

description = 'chess-server'
